!function(e){"use strict";var t,s;"undefined"!=typeof e&&(t=e,s=t.ResourceTimingDecompression);var r={};r.noConflict=function(){return t.ResourceTimingDecompression=s,r},r.INITIATOR_TYPES={other:0,img:1,link:2,script:3,css:4,xmlhttprequest:5,html:6},r.DIMENSION_NAMES={height:0,width:1,y:2,x:3},r.getRevMap=function(e){var t={};for(var s in e)e.hasOwnProperty(s)&&(t[e[s]]=s);return t},r.REV_INITIATOR_TYPES=r.getRevMap(r.INITIATOR_TYPES),r.REV_DIMENSION_NAMES=r.getRevMap(r.DIMENSION_NAMES);var n="*",i="0",o=n+i,d="1";r.decompressResources=function(e,t){var s,r=[];t=t||"";for(var n in e)if(e.hasOwnProperty(n)){var i=e[n],o=t+n;if(o.indexOf("|",o.length-1)!==-1&&(o=o.substring(0,o.length-1)),"string"==typeof i){var d=i.split("|");s=void 0,d.length>0&&this.isDimensionData(d[0])&&(s=this.decompressDimension(d[0]),d=d.splice(1));for(var p=0;p<d.length;p++){var c=d[p];this.isDimensionData(c)||r.push(this.addDimension(this.decodeCompressedResource(c,o),s))}}else{var a=this.decompressResources(i,o);r=r.concat(a)}}return r},r.isDimensionData=function(e){return e&&e.startsWith(o)},r.decompressDimension=function(e){var t={};if(!this.isDimensionData(e))return t;e=e.substring(o.length);for(var s=e.split(","),r=0;r<s.length;r++)""===s[r]?t[this.REV_DIMENSION_NAMES[r]]=0:t[this.REV_DIMENSION_NAMES[r]]=parseInt(s[r],36);return t},r.addDimension=function(e,t){if(!e||!t)return e;for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);return e},r.getInitiatorTypeFromIndex=function(e){return this.REV_INITIATOR_TYPES.hasOwnProperty(e)?this.REV_INITIATOR_TYPES[e]:"other"},r.decodeCompressedResource=function(e,t){if(!e||!t)return{};var s=parseInt(e[0],10);e=e.length>1?e.split(n+d):[];for(var r=e.length>0&&e[0].length>1?e[0].substring(1).split(","):[],i=e.length>1?e[1]:"",o=0;o<r.length;o++)""===r[o]?r[o]=0:r[o]=parseInt(r[o],36);var p=r.length>=1?r[0]:0,c=r.length<10?p:this.decodeCompressedResourceTimeStamp(r,9,p),a={name:t,initiatorType:this.getInitiatorTypeFromIndex(s),startTime:p,redirectStart:this.decodeCompressedResourceTimeStamp(r,9,p)>0?p:0,redirectEnd:this.decodeCompressedResourceTimeStamp(r,9,p),fetchStart:c,domainLookupStart:this.decodeCompressedResourceTimeStamp(r,8,p),domainLookupEnd:this.decodeCompressedResourceTimeStamp(r,7,p),connectStart:this.decodeCompressedResourceTimeStamp(r,6,p),secureConnectionStart:this.decodeCompressedResourceTimeStamp(r,5,p),connectEnd:this.decodeCompressedResourceTimeStamp(r,4,p),requestStart:this.decodeCompressedResourceTimeStamp(r,3,p),responseStart:this.decodeCompressedResourceTimeStamp(r,2,p),responseEnd:this.decodeCompressedResourceTimeStamp(r,1,p)};return a.duration=a.responseEnd>0?a.responseEnd-a.startTime:0,i.length>0&&this.decompressSize(i,a),a},r.decodeCompressedResourceTimeStamp=function(e,t,s){return e&&e.length>=t+1&&0!==e[t]?e[t]+s:0},r.decompressSize=function(e,t){var s,r;for("undefined"==typeof t&&(t={}),s=e.split(","),r=0;r<s.length;r++)"_"===s[r]?s[r]=0:(""===s[r]&&(s[r]=0),s[r]=parseInt(s[r],36),r>0&&(s[r]+=s[0]));return 1===s.length&&s.push(s[0]),2===s.length&&s.push(s[0]),t.encodedBodySize=s[0],t.transferSize=s[1],t.decodedBodySize=s[2],t},"function"==typeof define&&define.amd?define([],function(){return r}):"undefined"!=typeof module&&module.exports?module.exports=r:"undefined"!=typeof t&&(t.ResourceTimingDecompression=r)}("undefined"!=typeof window?window:void 0);